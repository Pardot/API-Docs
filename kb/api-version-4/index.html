<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Official documentation for the Pardot API">
        
        <link rel="canonical" href="http://developer.pardot.com/kb/api-version-4/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Transitioning to Version 4 - Pardot API Documentation</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            // Current page data
            var mkdocs_page_name = "Transitioning to Version 4";
            var mkdocs_page_input_path = "kb/api-version-4.md";
            var mkdocs_page_url = "/kb/api-version-4/";
        </script>
        

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Pardot API Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li class=" ">
                                <a href="../..">
                                    
                                    Official Pardot API Documentation
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../../version3and4overview/">
                                    
                                    Overview (v3/v4)
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../use-cases/">
                                    
                                    Use Cases for Pardot APIs
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../getting-started/">
                                    
                                    Getting Started
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../authentication/">
                                    
                                    Authentication
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../object-field-references/">
                                    
                                    Object Field References (v3/v4)
                                    
                                </a>
                            </li>
                        
                            <li class="active ">
                                <a href="./">
                                    
                                    Transitioning to Version 4
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../error-codes-messages/">
                                    
                                    Error Codes & Messages
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../bulk-data-pull/">
                                    
                                    Bulk Data Pull
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../salesforce-endpoints/">
                                    
                                    Related Salesforce Endpoints
                                    
                                </a>
                            </li>
                        
                        </ul>
                    </li>
                
            
            
            
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Version 3 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li class=" ">
                                <a href="../api-version-3/accounts/">
                                    
                                    Accounts
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/campaigns/">
                                    
                                    Campaigns
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/custom-fields/">
                                    
                                    Custom Fields
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/custom-redirects/">
                                    
                                    Custom Redirects
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/dynamic-content/">
                                    
                                    Dynamic Content
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/emails/">
                                    
                                    Email
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/batch-email-clicks/">
                                    
                                    Email Clicks
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/email-templates/">
                                    
                                    Email Templates
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/forms/">
                                    
                                    Forms
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/lifecycle-histories/">
                                    
                                    Lifecycle Histories
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/lifecycle-stages/">
                                    
                                    Lifecycle Stages
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/lists/">
                                    
                                    Lists
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/list-memberships/">
                                    
                                    List Memberships
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/opportunities/">
                                    
                                    Opportunities
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/prospects/">
                                    
                                    Prospects
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/prospect-accounts/">
                                    
                                    Prospect Accounts
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/tags/">
                                    
                                    Tags
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/tag-objects/">
                                    
                                    TagObjects
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/users/">
                                    
                                    Users
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/visitors/">
                                    
                                    Visitors
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/visitor-activities/">
                                    
                                    Visitor Activities
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/visits/">
                                    
                                    Visits
                                    
                                </a>
                            </li>
                        
                            <li class=" separator-above">
                                <a href="../api-version-3/import/">
                                    
                                    Import API (for Prospects)
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-3/export/">
                                    
                                    Export API
                                    
                                </a>
                            </li>
                        
                        </ul>
                    </li>
                
            
            
            
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Version 4 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li class=" ">
                                <a href="accounts/">
                                    
                                    Accounts
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="campaigns/">
                                    
                                    Campaigns
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="custom-fields/">
                                    
                                    Custom Fields
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="custom-redirects/">
                                    
                                    Custom Redirects
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="dynamic-content/">
                                    
                                    Dynamic Content
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="emails/">
                                    
                                    Email
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="batch-email-clicks/">
                                    
                                    Email Clicks
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="email-templates/">
                                    
                                    Email Templates
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="forms/">
                                    
                                    Forms
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="lifecycle-histories/">
                                    
                                    Lifecycle Histories
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="lifecycle-stages/">
                                    
                                    Lifecycle Stages
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="lists/">
                                    
                                    Lists
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="list-memberships/">
                                    
                                    List Memberships
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="opportunities/">
                                    
                                    Opportunities
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="prospects/">
                                    
                                    Prospects
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="prospect-accounts/">
                                    
                                    Prospect Accounts
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="tags/">
                                    
                                    Tags
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="tag-objects/">
                                    
                                    TagObjects
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="users/">
                                    
                                    Users
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="visitors/">
                                    
                                    Visitors
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="visitor-activities/">
                                    
                                    Visitor Activities
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="visits/">
                                    
                                    Visits
                                    
                                </a>
                            </li>
                        
                            <li class=" separator-above">
                                <a href="import/">
                                    
                                    Import API (for Prospects)
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="export/">
                                    
                                    Export API
                                    
                                </a>
                            </li>
                        
                        </ul>
                    </li>
                
            
            
            
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Version 5 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li class=" ">
                                <a href="../api-version-5/version5overview/">
                                    
                                    Overview
                                    
                                </a>
                            </li>
                        
                            <li class=" separator-above">
                                <a href="../api-version-5/campaign/">
                                    
                                    Campaigns
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-5/custom-redirect/">
                                    
                                    Custom Redirects
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-5/file/">
                                    
                                    Files
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-5/folder/">
                                    
                                    Folders
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-5/form/">
                                    
                                    Forms
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-5/layout-template/">
                                    
                                    Layout Templates
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-5/prospect-account/">
                                    
                                    Prospect Accounts
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-5/tracker-domain/">
                                    
                                    Tracker Domains
                                    
                                </a>
                            </li>
                        
                            <li class=" ">
                                <a href="../api-version-5/user/">
                                    
                                    Users
                                    
                                </a>
                            </li>
                        
                        </ul>
                    </li>
                
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="#mkdocs_search_modal" data-toggle="modal"><i class="fa fa-search"></i> Search</a>
                </li>
                
                
                <li>
                    <a rel="next" href="../object-field-references/">
                    <i class="fa fa-arrow-left"></i>
                    
                    Object Field References (v3/v4)
                    
                    </a>
                </li>
                
                
                <li>
                    <a rel="prev" href="../error-codes-messages/">
                    
                    Error Codes & Messages
                    
                    <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#what-is-version-4">What Is Version 4?</a></li>
        <li class="main "><a href="#transitioning-from-version-3-to-version-4">Transitioning from Version 3 to Version 4</a></li>
            <li><a href="#request-path-changes">Request Path Changes</a></li>
            <li><a href="#prospect-api-changes">Prospect API Changes</a></li>
            <li><a href="#opportunity-api-changes">Opportunity API Changes</a></li>
            <li><a href="#visitor-api-changes">Visitor API Changes</a></li>
    </ul>
</div></div>
            <div class="col-md-9 main-content" role="main">
                <div class="alert alert-warning">
                    Pardot's developer content is getting a makeover! Starting July 12th, you’ll be redirected to our new site.
                </div>
                
                    <h1 id="what-is-version-4">What Is Version 4?</h1>
<p>Version 4 was created to accommodate multiple prospects with the same email address.
If your Pardot org has the allow multiple prospects with the same email address (AMPSEA) feature enabled, then use version 4.
If your Pardot org doesn’t have AMPSEA enabled, use version 3.</p>
<p>To determine if your Pardot org has AMPSEA enabled, <a href="https://help.salesforce.com/articleView?id=sf.pardot_admin_ampsea_parent.htm&amp;">check out this guide.</a></p>
<h1 id="transitioning-from-version-3-to-version-4">Transitioning from Version 3 to Version 4</h1>
<p>If you want to enable AMPSEA in your Pardot account, use the following guidelines to keep using Pardot APIs.</p>
<h2 id="request-path-changes">Request Path Changes</h2>
<p>Update your requests to use the <code>/version/4</code> path. For example:</p>
<p>Before:</p>
<pre><code>GET: https://pi.pardot.com/api/prospect/version/3/read/id/1
</code></pre>

<p>After:</p>
<pre><code>GET: https://pi.pardot.com/api/prospect/version/4/read/id/1
</code></pre>

<h2 id="prospect-api-changes">Prospect API Changes</h2>
<p>Most of the differences between version 3 and version 4 are in the prospect APIs. </p>
<ul>
<li><strong>New reference field:</strong>  Prospects can be referenced using the Salesforce CRM Identifier, the <code>fid</code> field.
This <code>fid</code> field refers to the ID of the Lead or Contact record in Salesforce.
You can find the lead ID (begins with 00Q) or the contact ID (begins with 003) in the URL when viewing a lead or contact record.
Or, you can get multiple contacts or lead ID from Salesforce using the export tool.
<img src="/img/lead_identifier_example.png" width="100%" alt="lead_identifier_example"></li>
<li><strong>Create:</strong> Prospects can still be created with a referenced <code>email</code> address.
If you call the create API with the same email address multiple times, each call creates a prospect.
Previously, you would get an error.</li>
<li><strong>Read:</strong> When making a read query, querying by <code>email</code> returns all prospects that share that email address.
Querying by Pardot <code>id</code> or Salesforce <code>fid</code> only returns the one matching prospect.</li>
<li><strong>Update:</strong> Because there can be multiple prospects with the same email address, prospects can no longer be updated when referenced via <code>email</code> alone.
Instead, use either the Pardot <code>id</code> or Salesforce <code>fid</code> references.</li>
<li><strong>Upsert:</strong> Upsert query by <code>email</code> <em>always</em> creates a prospect.
Upsert by Pardot <code>id</code> or Salesforce <code>fid</code> updates or creates as needed.
See <a href="prospects/#prospect-upsert">Upserting Prospects</a> for more details.</li>
<li><strong>Delete:</strong> Delete query must reference by Pardot <code>id</code> or Salesforce <code>fid</code>.</li>
<li><strong>Batch processing:</strong>  See examples of batch processing in the Prospect object documentation.</li>
</ul>
<p>See the <a href="prospects/">Prospect object documentation</a>.</p>
<h2 id="opportunity-api-changes">Opportunity API Changes</h2>
<ul>
<li><strong>Create:</strong> Creating an opportunity using a <code>prospect_email</code> reference must correspond to an existing prospect.
If there are multiple prospects with that email address, the prospect with the most recent activity date is used.
If you want to apply the opportunity to a specific prospect, then reference the prospect using <code>prospect_id</code>.</li>
<li><strong>Query:</strong> If you query using a <code>prospect_email</code> reference, you receive opportunities that correspond with any prospects that share that email address.
if you want a specific prospect then query by the <code>prospect_id</code>.</li>
</ul>
<p>See the <a href="opportunities/">Opportunity Object documentation</a>.</p>
<h2 id="visitor-api-changes">Visitor API Changes</h2>
<ul>
<li><strong>Assign:</strong> Assigning by <code>prospect_email</code> alone (no <code>prospect_id</code>) returns an error.</li>
</ul>
<p>See the <a href="/kb/api-version-4/visitors/">Visitor Object documentation</a>.</p>
                
            </div>
        </div>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form id="content_search">
                    <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" name="q" autocomplete="off" autofocus>
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script>var base_url = '../..';</script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>
        <script src="../../search/main.js" defer></script>
    </body>
</html>